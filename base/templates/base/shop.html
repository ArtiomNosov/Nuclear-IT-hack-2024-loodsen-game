{% extends 'main.html' %}

{% block content %}
<main class="user__shop">
    <div class="container">
        <div class="shop__header">
            <div class="shop__title">
                <h3>Обменяйте ваше золото на товары</h3>
                <p>У вас в мешке: {{balance}} золотых</p>
            </div>
            <a href="{{request.META.HTTP_REFERER}}" class="back-button">
                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32">
                    <title>назад</title>
                    <path d="M13.723 2.286l-13.723 13.714 13.719 13.714 1.616-1.611-10.96-10.96h27.625v-2.286h-27.625l10.965-10.965-1.616-1.607z"></path>
                </svg>
            </a>
        </div>
        <div class="shop__cards">
            {% for product in products %}
            <div class="card">
                <div class="card__header">
                    <h4>{{ product.name }}</h4>
                </div>
                <div class="card__body">
                    <p>Цена: {{ product.price }} золотых</p>
                    <form action="{% url 'purchase' product.id %}" method="POST">
                        {% csrf_token %}
                        <button type="submit" class="purchase-button">Купить</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</main>

<style>
    .shop__header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
    }
    .shop__title {
        font-size: 1.5rem;
    }
    .shop__cards {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        gap: 20px;
    }
    .card {
        border: 1px solid #ccc;
        border-radius: 8px;
        padding: 16px;
        text-align: center;
    }
    .purchase-button {
        background-color: #4CAF50;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
    }
    .purchase-button:hover {
        background-color: #45a049;
    }
    .back-button {
        text-decoration: none;
        color: #333;
    }
</style>
{% endblock content %}